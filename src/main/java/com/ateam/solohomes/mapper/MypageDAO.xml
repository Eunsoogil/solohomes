<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ateam.solohomes.beans.MypageDAO">


	<select id="selectMemberInfo" resultType="com.ateam.solohomes.beans.MemberDTO">
			SELECT *
			FROM `member`
			WHERE mb_uid = #{mb_uid}	
 	</select>
 	
 	<update id="updateMemberInfo" flushCache="true">
			UPDATE `member` 
			SET mb_nn = #{dto.mb_nn}, 
				mb_pw = #{dto.mb_pw},
				mb_email = #{dto.mb_email},
				mb_zipcode = #{dto.mb_zipcode},
				mb_addr = #{dto.mb_addr},
				mb_addr2 = #{dto.mb_addr2},
				mb_phone = #{dto.mb_phone}
			WHERE mb_uid = #{dto.mb_uid}
	</update>
	
	
	<select id="selectPurchaseListByUid" resultType="com.ateam.solohomes.beans.PaymentDTO">
			SELECT g.g_uid "g_uid", gi.in_img "in_img", g.g_name "g_name", p.py_regdate "py_regdate", p.py_amount "py_amount", gi.in_color "in_color", g.g_price*p.py_amount "py_price", p.py_confirm "py_confirm"
			FROM goods g, goods_info gi, `member` m, payment p
			WHERE m.mb_uid = #{mb_uid}
				  and m.mb_uid = p.mb_uid
				  and p.in_uid = gi.in_uid
				  and gi.g_uid = g.g_uid
			ORDER BY p.py_regdate DESC;	
 	</select>	

</mapper>